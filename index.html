<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="css/utils.css">

    <link rel="stylesheet" href="css/style.css">
    <title>Spotify web</title>
</head>

<body>
    <div class="container-fluid col">
        <div class="row">
            <!--#region aside-->
            <aside class="col">
                <div class="aside-logo">
                    <img class="hide-on-mobile" src="img/logo.svg" alt="Spotify logo">
                    <img class="show-on-mobile hide" src="img/logo-small.svg" alt="Spotify logo">
                </div>

                <div class="aside-function">
                    <ul>
                        <li class="marked">

                            <a href="#">
                                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M448 463.746h-149.333v-149.333h-85.334v149.333h-149.333v-315.428l192-111.746 192 110.984v316.19z"
                                        fill="inherit" />
                                </svg>
                                <span class="hide-on-mobile">Home</span></a>
                        </li>
                        <li class="">

                            <a href="#">
                                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M349.714 347.937l93.714 109.969-16.254 13.969-93.969-109.969q-48.508 36.825-109.207 36.825-36.826 0-70.476-14.349t-57.905-38.603-38.603-57.905-14.349-70.476 14.349-70.476 38.603-57.905 57.905-38.603 70.476-14.349 70.476 14.349 57.905 38.603 38.603 57.905 14.349 70.476q0 37.841-14.73 71.619t-40.889 58.921zM224 377.397q43.428 0 80.254-21.461t58.286-58.286 21.461-80.254-21.461-80.254-58.286-58.285-80.254-21.46-80.254 21.46-58.285 58.285-21.46 80.254 21.46 80.254 58.285 58.286 80.254 21.461z"
                                        fill="inherit" fill-rule="evenodd" />
                                </svg>
                                <span class="hide-on-mobile">Cerca</span></a>
                        </li>


                        <li> <a href="#">

                                <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M291.301 81.778l166.349 373.587-19.301 8.635-166.349-373.587zM64 463.746v-384h21.334v384h-21.334zM192 463.746v-384h21.334v384h-21.334z"
                                        fill="inherit" />



                                </svg>

                                <span class="hide-on-mobile">La tua libreria</span></a>
                        </li>
                    </ul>
                </div>


                <div class="aside-playlist hide-on-mobile">
                    <h3>PLAYLIST</h3>
                    <ul>
                        <li>
                            <a href="#">
                                <div class="add-playlist">
                                    &plus;
                                </div>
                                <span>Crea Playlist</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                Nuova playlist
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="aside-profile col grow flex-end">

                    <div class="profile-install row cg-1">
                        <a href="#" class="row cg-1 align-center"><img src="./img/download.svg" alt="download symbol">
                        <p class="hide-on-mobile">Installa l'app</p></a>
                    </div>

                    <hr class="hide-on-mobile">

                    <div class="profile-img row cg-1 mb-1">
                        <a href="#" class="row cg-1 align-center"><img src="img/profile.svg" alt="profile symbol">
                        <p class="hide-on-mobile">John Doe</p></a>
                    </div>

                </div>
            </aside>
            <!--#endregion aside-->

            <div class="col content-container grow">

                <!--#region header-->
                <header class="row-reverse">
                    <button>effettua l'Upgrade</button>
                </header>
                <!--#endregion header-->

                <!--#region main-->
                <main>
                    <nav class="col align-center">
                        <div class="row cg-1 mt-3 wrap rg-1 flex-center content-category">

                            <a href="#">Podcast</a>
                            <a href="#">classifiche</a>
                            <a href="#">generi e mood</a>
                            <a href="#">nuove uscite</a>
                            <a href="#">Scopri</a>
                            <a class="marked" href="#">In evidenzia</a>
                        </div>
                    </nav>

                    <!--#region recently played -->
                    <section id="recently">
                        <div class="section-title">
                            Recently Played
                        </div>

                        <div class="article-wrap row flex-between">
                            <article>
                                <div class="article-img reproduction">
                                    <img src="./img/rick.jpg" alt="a quit place cover">
                                </div>
                                <div class="article-title ">
                                    Never Gonna Give You Up
                                </div>
                                <div class="article-artist">Rick Astley</div>
                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/cure.jpeg" alt="cure Cover">
                                </div>
                                <div class="article-title">
                                    A cure for wellness
                                </div>
                                <div class="article-artist">Subtitle</div>
                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/split.jpeg" alt="slit Cover">
                                </div>
                                <div class="article-title">
                                    Split
                                </div>
                                <div class="article-artist">Subtitle</div>
                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/metal_lifting.jpg" alt="heavy metal Cover">
                                </div>
                                <div class="article-title">
                                    Heavy Metal
                                </div>
                                <div class="article-artist">Subtitle</div>
                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/player_left.jpg" alt="player left Cover">
                                </div>
                                <div class="article-title">
                                    HillTop Hoods
                                </div>
                                <div class="article-artist">Subtitle</div>
                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/stranger.jpeg" alt="stranger things cover">
                                </div>
                                <div class="article-title">
                                    Stranger Things , Vol.
                                    1 (a Netflix original series) Soundtrack
                                </div>
                                <div class="article-artist">Kyele Dixon & Michael Stein</div>
                            </article>
                        </div>
                    </section>
                    <!--#endregion recently played -->


                    <!--#region create for  -->
                    <section id="create">


                        <div class="section-title">
                            Creato per John Doe
                        </div>

                        <div class="article-wrap row flex-start">

                            <article>
                                <div class="article-img">
                                    <img src="./img/mixdaily.jpeg" alt="daily mix cover">
                                </div>
                                <div class="article-title">
                                    Daily Mix
                                </div>

                            </article>
                            <article>
                                <div class="article-img">
                                    <img src="./img/radar.jpeg" alt="radar Cover">
                                </div>
                                <div class="article-title">
                                    Release Radar
                                </div>

                            </article>
                        </div>
                    </section>
                    <!--#endregion create for  -->


                    <!--#region best artist -->
                    <section id="artist">
                        <div class="section-comment">
                            Più ascolti più accurati saranno i tuoi suggerimenti
                        </div>

                        <div class="section-title">
                            Artisti più popolari
                        </div>

                        <div class="article-wrap row flex-start">

                            <article>
                                <div class="article-img circle">
                                    <img src="./img/einaudi.jpeg" alt="Einaudi Cover">
                                </div>
                                <div class="article-title">
                                    Ludovico Einaudi
                                </div>

                            </article>
                            <article>
                                <div class="article-img circle">
                                    <img src="./img/youg.jpeg" alt="Youg Cover">
                                </div>
                                <div class="article-title">
                                    Lana del Rey
                                </div>

                            </article>
                        </div>
                    </section>
                    <!--#endregion best artist -->





                </main>
                <!--#endregion main-->
            </div>

        </div>

        <!--#region footer-->
        <footer class="row align-center flex-between">


            <!--#region COVER-->
            <div class="in-play row">
                <!--#region cover music-->
                <div class="col article-col">

                    <article class="row">
                        <div class="article-img">
                            <img src="./img/rick.jpg" alt="a quite place Cover">
                        </div>
                        <div class="article-content">
                            <div class="article-title">
                                never gonna give you up
                            </div>
                            <div class="article-artist p-0">
                                Rick Astley
                            </div>
                        </div>

                    </article>
                </div>

                <div class="col likes">

                    <div class=" row">
                        <button><i class="fa-regular fa-folder"></i></button>
                        <button><i class="fa-regular fa-heart"></i></button>

                    </div>
                </div>
                <!--#endregion button likes-->

            </div>
            <!--#endregion COVER-->

            <!--#region SLIDER MUSIC-->

            <div class="play-controls col">
                <audio
                    src="./img/Never Gonna Give You Up Original.mp3"></audio>
                <!--#region CONTROL MUSIC-->
                <div class="play-controls-button row flex-center">
                    <button><i class="fa-solid fa-random"></i></button>
                    <button><i class="fa-solid fa-step-backward"></i></button>
                    <input type="checkbox" class="fa-regular" name="playPause" id="playPause">

                    <button><i class="fa-solid fa-step-forward"></i></button>

                    <button><i class="fa-solid fa-arrow-rotate-right"></i></button>
                </div>
                <!--#endregion CONTROL MUSIC-->

                
                <div class="slider align-center row">
                    <label for="player"><output id="rangevalue">0.00</output></label>
                    <input type="range" value="0" min="0" max="100" id="player">
                    <label for="player"><output id="duration"></output></label>
                </div>
            </div>
            <!--#endregion SLIDER MUSIC-->


            <!--#region SLIDER VOLUME-->
            <div class="volume-controls col align-center">
                <div class="row">
                    <button><i class="fa-solid fa-list"></i></i></button>
                    <button><i class="fa-solid fa-display"></i></button>
                    <button><i class="fa-solid fa-volume-up"></i></button>
                    <div class="volume-wrap col">
                        <input type="range" value="0" min="0" max="100" id="volume">
                    </div>
                </div>
            </div>
            <!--#endregion SLIDER VOLUME-->


        </footer>
        <!--#endregion footer-->

    </div>


    <script>

        const playerButton = document.querySelector('#playPause');
        const audio = document.querySelector('audio');
        const rangevalue = document.querySelector('#rangevalue');
        const player = document.querySelector('#player');
        const volume = document.querySelector('#volume');
        const duration = document.querySelector('#duration');
        const mute = document.querySelector('.fa-volume-up');
        const cover = document.querySelectorAll("div")
        
        window.onload = () => {
            const startVolume = audio.volume * 100;
            volume.value = startVolume;
            volume.style.backgroundSize = `${startVolume}% 100%`;

        }

        function toggleAudio() {
            if (audio.paused) {

                audio.play();
                playerButton.checked = true;

            } else {
                audio.pause();
                playerButton.checked = false;
            }


        }

        playerButton.addEventListener("change", toggleAudio);
        audio.addEventListener("ended", changeButton)

        audio.ontimeupdate = changeTimelinePosition;

        function changeTimelinePosition() {
            let percentPosition = (100 * audio.currentTime) / audio.duration;
            let current=Math.floor(audio.currentTime)/60;
            
            current= current.toFixed(2)
            player.value = percentPosition;
            player.style.backgroundSize = `${percentPosition}% 100%`;
            duration.innerHTML = createLabel(audio.duration);
            rangevalue.innerHTML = createLabel(audio.currentTime);
        }



        const createLabel = (time) => {
            let minutes = Math.floor(time / 60)
            let seconds =  Math.floor(time % 60)

            let label = ""
            // Minutes
            if(minutes < 10 ) {
                minutes = "0" + minutes;
            }
             
            //seconds

            if(seconds < 10) {
                seconds= "0" + seconds;
            }
            label = minutes + ":" + seconds;
            return label;
            
        }

        

        function changeButton() {
            if (playerButton.checked) {
                playerButton.checked = false;
            }
            else {
                playerButton.checked = true;
            }
        }

        function changeSeek() {
            const time = (player.value * audio.duration) / 100;
            audio.currentTime = time;
        }


        function changeVolume() {
            const toChange = volume.value / 100 ;
            audio.volume = toChange;
            volume.style.backgroundSize = `${39}% 100%`;
            console.log(toChange);

        }


        volume.addEventListener("change", changeVolume);

        player.addEventListener('change', changeSeek);



        mute.addEventListener("click", () => {
            audio.muted = !audio.muted
            mute.classList.toggle("fa-volume-up")
            mute.classList.toggle("fa-volume-xmark")       
        })

        cover.addEventListener("click", (e) => {
            console.log(e)
        })

        


        
        const rangeInputs = document.querySelectorAll('input[type="range"]');
        function handleInputChange(e) {
            let target = e.target
            if (e.target.type !== 'range') {
                target = document.getElementById('range')
            }
            const min = target.min
            const max = target.max
            const val = target.value

            target.style.backgroundSize = (val - min) * 100 / (max - min) + '% 100%'
        }

        rangeInputs.forEach(input => {
            input.addEventListener('input', handleInputChange)
        })

        numberInput.addEventListener('input', handleInputChange)
    </script>
</body>

</html>